{"version":3,"sources":["webpack:///../templates/product.handlebars","webpack:///./constants.js","webpack:///./http.js","webpack:///./product.class.js"],"names":[],"mappings":";;;;;;;;;;;AAAA,iBAAiB,mBAAO,CAAC,oFAAuC;AAChE,yBAAyB,uDAAuD;AAChF,iEAAiE;AACjE,6EAA6E;AAC7E;AACA;AACA;AACA;AACA;;AAEA;AACA,oNAAoN,4BAA4B,oBAAoB,SAAS,qBAAqB,QAAQ,uBAAuB;AACjU;AACA,4MAA4M,wBAAwB,oBAAoB,SAAS,qBAAqB,QAAQ,uBAAuB;AACrT;AACA,wNAAwN,8BAA8B,oBAAoB,SAAS,qBAAqB,QAAQ,uBAAuB;AACvU;AACA,kNAAkN,2BAA2B,oBAAoB,SAAS,qBAAqB,QAAQ,uBAAuB;AAC9T;AACA,4MAA4M,wBAAwB,oBAAoB,SAAS,qBAAqB,QAAQ,uBAAuB;AACrT;AACA,CAAC,gBAAgB,E;;;;;;;;;;;;;;;;;;;ACrBJ;;AAEN,4C;;;;;;;;;;;;;;;;;;;ACFM;;AAEN;AACP,+CAA+C;AAC/C,uCAAuC,wBAAwB;AAC/D;AACA;AACA,qCAAqC;AACrC,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,uCAAuC,qCAAqC;AAC5E;;AAEA;AACA,sCAAsC,qCAAqC;AAC3E;;AAEA;AACA;AACA;AACA,C;;;;;;;;;;;;;;;;;;;;;;;AC5B+D;AAChC;AACO;;AAE/B;AACP,iBAAiB,qDAAqD;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe,8CAAQ,CAAC,iDAAM;AAC9B;;AAEA;AACA,eAAe,+CAAS,CAAC,iDAAM;AAC/B;;AAEA;AACA,eAAe,iDAAW,CAAC,iDAAM;AACjC;;AAEA;AACA;AACA;;AAEA,6BAA6B,QAAQ;AACrC;;AAEA,2BAA2B,oEAAgB;AAC3C;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;;AAET;AACA;AACA","file":"commons.bundle.js","sourcesContent":["var Handlebars = require(\"../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<img class=\\\"card-img-top\\\" src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"mainPhoto\") || (depth0 != null ? lookupProperty(depth0,\"mainPhoto\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"mainPhoto\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":31},\"end\":{\"line\":1,\"column\":44}}}) : helper)))\n    + \"\\\">\\n<div class=\\\"card-body\\\">\\n    <h5 class=\\\"card-title\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"title\") || (depth0 != null ? lookupProperty(depth0,\"title\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"title\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":27},\"end\":{\"line\":3,\"column\":36}}}) : helper)))\n    + \"</h5>\\n    <p class=\\\"card-text\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"description\") || (depth0 != null ? lookupProperty(depth0,\"description\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"description\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":25},\"end\":{\"line\":4,\"column\":40}}}) : helper)))\n    + \"</p>\\n    <div class=\\\"text-right\\\"><button class=\\\"btn btn-danger\\\">Delete</button></div>\\n</div>\\n<div class=\\\"card-footer bh-transparent text-muted row\\\">\\n    <div class=\\\"col\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"category\") || (depth0 != null ? lookupProperty(depth0,\"category\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"category\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":21},\"end\":{\"line\":8,\"column\":33}}}) : helper)))\n    + \"</div>\\n    <div class=\\\"col text-right\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"price\") || (depth0 != null ? lookupProperty(depth0,\"price\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"price\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":32},\"end\":{\"line\":9,\"column\":41}}}) : helper)))\n    + \"</div>\\n</div>\";\n},\"useData\":true});","'use strict';\n\nexport const SERVER = 'http://arturober.com:5007/';","'use strict';\n\nexport class Http {\n    static async ajax(method, url, headers = {}, body = null) {\n        const resp = await fetch(url, { method, headers, body });\n        if (!resp.ok) throw new Error(resp.statusText);\n        if (resp.status != 204) {\n            return await resp.json(); // promise\n        } else {\n            return null;\n        }\n    }\n\n    static get(url) {\n        return Http.ajax('GET', url);\n    }\n\n    static post(url, data) {\n        return Http.ajax('POST', url, { 'Content-Type': 'application/json' }, JSON.stringify(data));\n    }\n\n    static put(url, data) {\n        return Http.ajax('PUT', url, { 'Content-Type': 'application/json' }, JSON.stringify(data));\n    }\n\n    static delete(url) {\n        return Http.ajax('DELETE', url);\n    }\n}","import productsTemplate from '../templates/product.handlebars';\nimport {Http} from './http.js';\nimport {SERVER} from './constants.js';\n\nexport class Product {\n    constructor({ id, title, description, category, price, mainPhoto }) {\n        this.id = id ? id : null;\n        this.title = title;\n        this.description = description;\n        this.category = category;\n        this.price = price;\n        this.mainPhoto = mainPhoto;\n    }\n\n    static getAll() {\n        return Http.get(SERVER + 'products');\n    }\n\n    post() {\n        return Http.post(SERVER + 'products', this);\n    }\n\n    delete() {\n        return Http.delete(SERVER + 'products/' + this.id);\n    }\n\n    toHTML() {\n        let card = document.createElement('div');\n        card.classList.add('card', 'shadow');\n        \n        let p = new Product({...this});\n        p.category = p.category.name;\n\n        let productsHtml = productsTemplate(p);\n        card.innerHTML = productsHtml;\n\n        card.querySelector('button.btn-danger').addEventListener('click', async e => {\n            try {\n                await this.delete();\n                card.remove();\n            } catch (error) {\n                alert('Error: ' + error);\n            }\n        });\n\n        return card;\n    }\n}\n"],"sourceRoot":""}